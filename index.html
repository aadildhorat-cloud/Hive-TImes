<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hive Times - Businesses</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
        :root {
            --primary-color: #e74c3c;
            --secondary-color: #34495e;
            --background-color: #f9fafb;
            --text-color: #2d3748;
            --card-background: #ffffff;
            --border-radius: 16px;
            --box-shadow: 0 6px 25px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            font-size: 1rem;
        }

        /* --- Header & Navigation --- */
        header {
            background: linear-gradient(135deg, #610d00 0%, #8b1a00 100%);
            color: #fff;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        .header-content {
            display: flex;
            align-items: center;
            gap: 24px;
        }
        .logo h3 {
            margin: 0;
            font-size: 1.6rem;
            color: #fff;
            font-weight: 700;
        }
        .logo img {
            height: 90px;
            vertical-align: middle;
            margin-right: 40px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
        }

        nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            gap: 24px;
            align-items: center;
            flex-wrap: wrap;
        }

        nav a {
            color: #fff;
            text-decoration: none;
            font-weight: 600;
            padding: 12px 18px;
            border-radius: 12px;
            transition: var(--transition);
            font-size: 1.05rem;
        }
        nav a:hover {
            background-color: rgba(255, 255, 255, 0.15);
            transform: translateY(-3px);
        }

        .dropdown {
            position: relative;
            gap: 12px;
        }
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: var(--card-background);
            min-width: 220px;
            box-shadow: var(--box-shadow);
            z-index: 1001;
            border-radius: var(--border-radius);
            padding: 12px 0;
            animation: fadeIn 0.3s ease-in-out;
            top: 100%;
            left: 0;
            max-width: 280px;
        }
        .dropdown[aria-expanded="true"] .dropdown-content {
            display: block;
        }
        .dropdown-content a {
            color: var(--text-color);
            padding: 14px 20px;
            text-decoration: none;
            display: block;
            transition: var(--transition);
            font-weight: 500;
        }
        .dropdown-content a:hover {
            background-color: #f8f9fa;
            color: var(--primary-color);
        }

        .dropdown-btn {
            background: none;
            border: none;
            color: #fff;
            font-size: 1.05rem;
            font-weight: 600;
            cursor: pointer;
            padding: 12px 18px;
            border-radius: 12px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .dropdown-btn:hover {
            background-color: rgba(255, 255, 255, 0.15);
        }

        .nav-icon-btn {
            background: none;
            border: none;
            color: #fff;
            font-size: 1.3rem;
            cursor: pointer;
            padding: 12px;
            transition: var(--transition);
            border-radius: 50%;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .nav-icon-btn:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .search-container {
            display: flex;
            align-items: center;
            background-color: rgba(255, 255, 255, 0.25);
            border-radius: 30px;
            padding: 8px 20px;
            width: 100%;
            max-width: 400px;
            transition: var(--transition);
        }
        .search-container:focus-within {
            background-color: rgba(255, 255, 255, 0.35);
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);
        }
        .search-container input {
            background: none;
            border: none;
            outline: none;
            color: #fff;
            font-size: 1.05rem;
            flex-grow: 1;
            padding: 4px 0;
        }
        .search-container input::placeholder {
            color: rgba(255, 255, 255, 0.85);
        }
        .search-container i {
            color: #fff;
            margin-right: 12px;
            font-size: 1.1rem;
        }

        /* --- Slider Section --- */
        .slider-section {
            padding: 4rem 0;
            background: linear-gradient(to bottom, #ffffff 0%, #f8f9fa 100%);
            text-align: center;
        }
        .slider-container {
            width: 92%;
            max-width: 1300px;
            margin: 0 auto;
            overflow: hidden;
            position: relative;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            border: 1px solid #eee;
        }
        .slider {
            display: flex;
            transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .slide {
            min-width: 100%;
            box-sizing: border-box;
            position: relative;
        }
        .slide img {
            width: 100%;
            object-fit: cover;
            height: 450px;
            display: block;
        }

        .slide-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #fff;
            background: linear-gradient(to bottom, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.9) 100%);
            padding: 2.5rem;
            border-radius: var(--border-radius);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            max-width: 80%;
        }
        .slide-content h2 {
            font-size: 2.8rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }
        .slide-content p {
            font-size: 1.3rem;
            opacity: 0.9;
        }

        .slider-indicators {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
        }
        .indicator {
            width: 14px;
            height: 14px;
            background-color: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            cursor: pointer;
            transition: var(--transition);
        }
        .indicator:hover {
            background-color: rgba(255, 255, 255, 0.8);
        }
        .indicator.active {
            background-color: var(--primary-color);
            transform: scale(1.2);
        }

        /* --- Main Content Section --- */
        main {
            flex-grow: 1;
            padding: 3rem 2rem;
            max-width: 1500px;
            margin: 0 auto;
            width: 100%;
        }
        .section-title {
            text-align: center;
            font-size: 2.8rem;
            color: var(--secondary-color);
            margin-bottom: 3rem;
            font-weight: 800;
            position: relative;
        }
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--primary-color);
            border-radius: 2px;
        }

        .businesses-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2.5rem;
            padding: 2rem 0;
        }

        /* Businesses Grid Responsive Adjustments */
        @media (max-width: 900px) {
            .businesses-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 2rem;
            }
        }
        @media (max-width: 600px) {
            .businesses-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
        }

        .block {
            background-color: var(--card-background);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 2rem;
            text-align: center;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            min-height: 320px;
        }
        .block::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.05) 0%, transparent 100%);
            z-index: 0;
            opacity: 0;
            transition: var(--transition);
        }
        .block:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.18);
        }
        .block:hover::before {
            opacity: 1;
        }

        .block img {
            width: 100%;
            height: 240px;
            object-fit: cover;
            border-radius: var(--border-radius);
            margin-bottom: 1.5rem;
            transition: var(--transition);
        }
        @media (max-width: 900px) {
            .block img {
                height: 220px;
                margin-bottom: 1.2rem;
            }
            .block {
                padding: 1.8rem;
            }
        }
        @media (max-width: 600px) {
            .block img {
                height: 200px;
                margin-bottom: 1rem;
            }
            .block {
                padding: 1.5rem;
                min-height: 280px;
            }
        }
        @media (max-width: 480px) {
            .block img {
                height: 180px;
            }
        }

        .block h3 {
            margin: 0.8rem 0;
            font-size: 1.6rem;
            color: var(--secondary-color);
            font-weight: 700;
        }
        .block p {
            font-size: 1.05rem;
            color: #555;
            min-height: 60px;
            margin-bottom: 1.5rem;
            line-height: 1.7;
        }
        @media (max-width: 900px) {
            .block p {
                min-height: 50px;
            }
        }
        @media (max-width: 600px) {
            .block p {
                min-height: 45px;
                font-size: 0.95rem;
            }
        }

        .block button {
            background: linear-gradient(135deg, var(--primary-color) 0%, #c0392b 100%);
            color: #fff;
            border: none;
            padding: 14px 32px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.05rem;
            font-weight: 600;
            transition: var(--transition);
            margin-top: 1rem;
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.3);
        }
        .block button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(39, 174, 96, 0.4);
        }
        @media (max-width: 768px) {
            .block button {
                padding: 12px 28px;
                font-size: 1rem;
            }
        }
        @media (max-width: 600px) {
            .block button {
                padding: 10px 24px;
                font-size: 0.9rem;
            }
        }

        /* --- Footer --- */
        footer {
            background: linear-gradient(135deg, #610d00 0%, #4a0a00 100%);
            color: #fff;
            padding: 3rem 2rem;
            text-align: center;
        }
        .footer-content {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            align-items: flex-start;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.15);
            padding-bottom: 2.5rem;
            margin-bottom: 2rem;
            gap: 2rem;
        }
        @media (max-width: 768px) {
            .footer-content {
                flex-direction: column;
                align-items: center;
                text-align: center;
                gap: 2.5rem;
            }
        }

        .footer-logo img {
            height: 70px;
            margin-bottom: 15px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }
        .footer-logo h3 {
            margin: 0;
            font-size: 1.8rem;
            font-weight: 700;
        }
        .footer-logo p {
            font-size: 1.05rem;
            color: #e0e0e0;
            margin-top: 10px;
            line-height: 1.6;
        }

        .social-media {
            list-style: none;
            padding: 0;
            display: flex;
            gap: 18px;
            margin-top: 20px;
        }
        .social-media a {
            color: #fff;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        .social-media a:hover {
            background-color: rgba(255, 255, 255, 0.2);
            color: #ffd700;
            transform: translateY(-3px);
        }
        @media (max-width: 768px) {
            .social-media {
                gap: 15px;
                margin-top: 15px;
            }
            .social-media a {
                width: 40px;
                height: 40px;
            }
        }

        .footer-nav ul {
            list-style: none;
            padding: 0;
            display: flex;
            flex-direction: column;
            gap: 14px;
        }
        .footer-nav a {
            color: #fff;
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            font-size: 1.05rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .footer-nav a:hover {
            color: #ffd700;
            transform: translateX(5px);
        }
        @media (min-width: 769px) {
            .footer-nav ul {
                flex-direction: row;
            }
        }
        @media (max-width: 768px) {
            .footer-nav a {
                font-size: 1rem;
            }
        }

        .footer-bottom {
            font-size: 0.95rem;
            color: #ccc;
            margin-top: 1.5rem;
            line-height: 1.6;
        }
        .footer-bottom i {
            color: var(--primary-color);
            animation: pulse 2s infinite;
        }

        /* --- Pop-up Styles --- */
        .popup {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }
        .popup-content {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            padding: 2.5rem;
            border-radius: var(--border-radius);
            max-width: 600px;
            width: 90%;
            position: relative;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            animation: fadeIn 0.4s ease-out;
            border: 1px solid #eee;
            text-align: center;
        }
        @media (max-width: 768px) {
            .popup-content {
                max-width: 95%;
                padding: 1.5rem;
            }
        }
        .popup-content h3 {
            margin-top: 0;
            color: var(--secondary-color);
            margin-bottom: 1.5rem;
            font-size: 2rem;
            font-weight: 700;
        }
        @media (max-width: 768px) {
            .popup-content h3 {
                font-size: 1.6rem;
            }
        }
        .popup-content p {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #444;
        }

        .close-button {
            position: absolute;
            top: 20px;
            right: 25px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: none;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .close-button:hover {
            background: rgba(231, 76, 60, 0.1);
            color: var(--primary-color);
            transform: rotate(90deg);
        }

        /* --- Login & Register Popup --- */
        .form-group {
            margin-bottom: 1.8rem;
            text-align: left;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.8rem;
            font-weight: 600;
            color: var(--secondary-color);
            font-size: 1.05rem;
        }
        .form-group input {
            width: 100%;
            padding: 14px;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            font-size: 1.05rem;
            transition: var(--transition);
        }
        .form-group input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.2);
        }
        @media (max-width: 768px) {
            .form-group input {
                padding: 12px;
            }
        }

        .form-submit-btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--primary-color) 0%, #c0392b 100%);
            color: #fff;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 1rem;
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.3);
        }
        @media (max-width: 768px) {
            .form-submit-btn {
                padding: 14px;
                font-size: 1.1rem;
            }
        }

        .toggle-form {
            margin-top: 1.5rem;
            color: #666;
            font-size: 1.05rem;
        }
        .toggle-form a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
        }

        /* --- User Profile --- */
        .user-profile {
            display: none;
            position: absolute;
            right: 0;
            top: 100%;
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 1.5rem;
            width: 280px;
            z-index: 100;
            animation: fadeIn 0.3s ease-in-out;
            border: 1px solid #eee;
        }
        @media (max-width: 768px) {
            .user-profile {
                width: 250px;
            }
        }
        @media (max-width: 480px) {
            .user-profile {
                width: 220px;
            }
        }

        .user-info {
            padding: 1.2rem 0;
            border-bottom: 1px solid #eee;
            margin-bottom: 1.2rem;
            text-align: center;
        }
        .user-info h4 {
            margin: 0 0 0.8rem 0;
            color: var(--secondary-color);
            font-size: 1.3rem;
            font-weight: 600;
        }
        @media (max-width: 768px) {
            .user-info h4 {
                font-size: 1.1rem;
            }
        }
        .user-info p {
            color: #666;
            font-size: 1.05rem;
        }
        @media (max-width: 768px) {
            .user-info p {
                font-size: 0.9rem;
            }
        }

        .user-actions button {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 1px solid #dee2e6;
            text-align: center;
            padding: 12px;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            color: var(--secondary-color);
            font-size: 1.05rem;
        }
        @media (max-width: 768px) {
            .user-actions button {
                font-size: 0.9rem;
            }
        }

        /* --- Shopping Cart Modal --- */
        #cartModalContent {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            padding: 2.5rem;
            border-radius: var(--border-radius);
            max-width: 850px;
            width: 95%;
            position: relative;
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.3);
            animation: fadeIn 0.4s ease-out;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid #eee;
        }
        #cartModalContent h3 {
            margin-top: 0;
            color: var(--secondary-color);
            font-size: 2.2rem;
            text-align: center;
            margin-bottom: 2rem;
            font-weight: 700;
        }
        @media (max-width: 768px) {
            #cartModalContent h3 {
                font-size: 1.8rem;
            }
        }

        #cartBusinessLogo {
            width: 100px;
            height: auto;
            border-radius: 12px;
            margin-bottom: 1rem;
        }
        #cartBusinessName {
            color: var(--secondary-color);
            font-size: 1.8rem;
        }
        @media (max-width: 768px) {
            #cartBusinessName {
                font-size: 1.4rem;
            }
        }

        .cart-item {
            display: flex;
            padding: 1.5rem;
            border-bottom: 1px solid #eee;
            align-items: center;
            transition: var(--transition);
        }
        .cart-item:hover {
            background-color: #f8f9fa;
        }
        .cart-item img {
            width: 90px;
            height: 90px;
            object-fit: cover;
            border-radius: 12px;
            margin-right: 1.5rem;
            transition: var(--transition);
        }
        @media (max-width: 768px) {
            .cart-item img {
                width: 70px;
                height: 70px;
            }
        }
        @media (max-width: 480px) {
            .cart-item img {
                width: 60px;
                height: 60px;
                margin-right: 1rem;
            }
        }

        .cart-item-name {
            font-weight: 700;
            margin-bottom: 0.8rem;
            font-size: 1.2rem;
            color: var(--secondary-color);
        }
        .cart-item-price {
            color: var(--primary-color);
            font-weight: 700;
            font-size: 1.1rem;
        }
        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            margin-top: 0.8rem;
        }
        .quantity-btn {
            width: 36px;
            height: 36px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            background-color: #fff;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        @media (max-width: 768px) {
            .quantity-btn {
                width: 32px;
                height: 32px;
                font-size: 16px;
            }
        }
        @media (max-width: 480px) {
            .quantity-btn {
                width: 28px;
                height: 28px;
                font-size: 14px;
            }
        }
        .quantity-btn:hover {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        .quantity-display {
            min-width: 36px;
            text-align: center;
            font-weight: 600;
            font-size: 1.1rem;
        }
        @media (max-width: 768px) {
            .quantity-display {
                min-width: 32px;
                font-size: 1rem;
            }
        }
        @media (max-width: 480px) {
            .quantity-display {
                min-width: 28px;
                font-size: 0.9rem;
            }
        }

        .remove-item-btn {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: #fff;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: var(--transition);
            font-weight: 600;
            margin-left: auto;
        }
        @media (max-width: 768px) {
            .remove-item-btn {
                font-size: 12px;
            }
        }
        @media (max-width: 480px) {
            .remove-item-btn {
                font-size: 10px;
            }
        }
        .remove-item-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 8px rgba(231, 76, 60, 0.4);
        }

        .cart-total {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary-color);
            text-align: right;
            margin: 2rem 0;
            padding: 1.5rem;
            background: linear-gradient(135deg, #fff5f5 0%, #ffeaea 100%);
            border-radius: 12px;
            border: 2px solid #ffe0e0;
        }
        @media (max-width: 768px) {
            .cart-total {
                font-size: 1.6rem;
                padding: 1rem;
            }
        }
        @media (max-width: 480px) {
            .cart-total {
                font-size: 1.4rem;
                padding: 0.8rem;
            }
        }

        .checkout-btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, #27ae60 0%, #219653 100%);
            color: #fff;
            font-size: 1.3rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 1.5rem;
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.3);
        }
        @media (max-width: 768px) {
            .checkout-btn {
                padding: 14px;
                font-size: 1.1rem;
            }
        }
        @media (max-width: 480px) {
            .checkout-btn {
                padding: 12px;
                font-size: 1rem;
            }
        }

        /* --- Animations --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* --- Back to Top Button --- */
        .back-to-top {
            display: none;
            position: fixed;
            bottom: 40px;
            right: 40px;
            background: linear-gradient(135deg, #8b1a00 0%, #610d00 100%);
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 1.6rem;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            transition: var(--transition);
            z-index: 998;
            display: flex;
            align-items: center;
            justify-content: center;
            transform: rotate(0deg);
        }
        .back-to-top:hover {
            background: linear-gradient(135deg, #610d00 0%, #4a0a00 100%);
            transform: translateY(-5px) rotate(15deg);
        }
        .contact-button {
            display: none;
            position: fixed;
            bottom: 110px;
            right: 40px;
            background: linear-gradient(135deg, #27ae60 0%, #219653 100%);
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 1.6rem;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            transition: var(--transition);
            z-index: 998;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        @media (max-width: 768px) {
            .back-to-top {
                bottom: 30px;
                right: 30px;
                width: 50px;
                height: 50px;
                font-size: 1.4rem;
            }
            .contact-button {
                bottom: 80px;
                right: 20px;
                width: 50px;
                height: 50px;
                font-size: 1.4rem;
            }
            .contact-button {
                display: block; /* Show contact button on mobile */
            }
        }
        @media (max-width: 480px) {
            .back-to-top {
                width: 45px;
                height: 45px;
                font-size: 1.2rem;
            }
            .contact-button {
                bottom: 60px;
                right: 15px;
                width: 45px;
                height: 45px;
                font-size: 1.2rem;
            }
        }

        /* --- Responsive Design --- */
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                padding: 0.8rem 1rem;
            }
            .header-content {
                flex-direction: column;
                width: 100%;
            }
            .logo {
                margin-bottom: 0;
                text-align: center;
            }
            .logo img {
                margin-right: 0;
                height: 70px;
            }
            nav ul {
                justify-content: center;
            }
            .nav-icon-btn {
                width: 40px;
                height: 40px;
            }
            .dropdown-content {
                min-width: 200px;
            }
            .search-container {
                padding: 6px 15px;
            }
            .search-container input {
                font-size: 0.95rem;
            }
        }
        @media (max-width: 480px) {
            body {
                font-size: 0.9rem;
            }
            .section-title {
                font-size: 1.8rem;
            }
            .section-title::after {
                width: 50px;
            }
            .slide img {
                height: 250px;
            }
            .slide-content {
                padding: 1.5rem;
            }
            .slide-content h2 {
                font-size: 1.6rem;
            }
            .slide-content p {
                font-size: 1rem;
            }
            .logo img {
                height: 60px;
            }
            .nav-icon-btn {
                width: 36px;
                height: 36px;
            }
            .dropdown-content {
                min-width: 180px;
            }
            footer {
                padding: 2rem 1rem;
            }
            .footer-content {
                padding-bottom: 2rem;
            }
            .contact-button {
                display: block;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">
               <img src="images-logo/hive-times-logo.png" alt="hive times logo">
                <h3>Hive Times</h3>
            </div>
            <div class="search-container">
                <i class="fas fa-search"></i>
                <input type="text" id="searchInput" placeholder="Search businesses...">
            </div>
        </div>
        <nav>
            <ul>
                <li><a href="about page home.html">About</a></li>
                <li class="dropdown" role="menu">
                    <button id="businessesDropdownBtn" class="dropdown-btn" aria-expanded="false" aria-controls="businessesDropdownContent">
                        Businesses <i class="fas fa-chevron-down"></i>
                    </button>
                    <ul class="dropdown-content" id="businessesDropdownContent">
                        <li><a href="#sweet-shops" role="menuitem">Sweet Shops</a></li>
                        <li><a href="#restaurant" role="menuitem">Restaurants</a></li>
                        <li><a href="#catering" role="menuitem">Catering</a></li>
                    </ul>
                </li>
               
                <li class="user-menu">
                    <button id="userBtn" class="nav-icon-btn" aria-label="User account">
                        <i class="fas fa-user-circle"></i> <span id="userDisplay">Account</span>
                    </button>
                    <div class="user-profile" id="userProfile">
                        <div class="user-info">
                            <h4 id="userName">Welcome</h4>
                            <p id="userEmail"></p>
                        </div>
                        <div class="user-actions">
                            <button id="logoutBtn">Logout</button>
                        </div>
                    </div>
                </li>
                <li>
                    <button id="cartBtn" class="nav-icon-btn" aria-label="View your shopping cart">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count" id="cartCount">0</span>
                    </button>
                </li>
            </ul>
        </nav>
    </header>
    <main>
        <section class="slider-section">
            <div class="slider-container" id="sliderContainer">
                <div class="slider" id="slider">
                    <div class="slide" role="tabpanel" id="slide1">
                        <a href="broadway page.html">
                            <img src="images-logo/broadway-sweets-long.jpg" alt="A variety of colorful Indian sweets arranged on a tray">
                        </a>
                    </div>
                    <div class="slide" role="tabpanel" id="slide2">
                        <a href="Sweet Mart.html">
                            <img src="images-logo/sweet-mart-long.jpg" alt="Assorted chocolates and pastries in a display case">
                        </a>
                    </div>
                    <div class="slide" role="tabpanel" id="slide3">
                        <a href="Polar ice cream.html">
                            <img src="images-logo/polar-ice-cream-long.jpg" alt="A close-up of a decorative dessert with fresh fruits and cream">
                        </a>
                    </div>
                    <div class="slide" role="tabpanel" id="slide4">
                        <a href="Sweet Depot website.html">
                            <img src="images-logo/sweet-deport-long.jpg" alt="A close-up of a decorative dessert with fresh fruits and cream">
                        </a>
                    </div>
                </div>
                <div class="slider-indicators" role="tablist">
                    <span class="indicator" onclick="changeSlide(0)" role="tab" aria-selected="true" aria-controls="slide1"></span>
                    <span class="indicator" onclick="changeSlide(1)" role="tab" aria-selected="false" aria-controls="slide2"></span>
                    <span class="indicator" onclick="changeSlide(2)" role="tab" aria-selected="false" aria-controls="slide3"></span>
                    <span class="indicator" onclick="changeSlide(3)" role="tab" aria-selected="false" aria-controls="slide4"></span>
                </div>
            </div>
        </section>
        <section id="sweet-shops">
            <h2 class="section-title">Featured Sweet Shops</h2>
            <div class="businesses-grid">
                <div class="block">
                    <a href="broadway page.html">
                        <img src="images-logo/broadway-sweets-logo.jpg" alt="Broadway-sweets-logo">
                    </a>
                    <div class="info">
                        <h3>Broadway Sweets</h3>
                        <p>Authentic Indian sweets and savory snacks, made with traditional recipes and love.</p>
                        <button class="open-popup" data-popup-target="broadwaysweetsPopup">Learn More</button>
                    </div>
                </div>
                <div class="block">
                    <a href="Sweet Depot website.html">
                        <img src="images-logo/sweet-deport-logo.jpg" alt="sweet-deport"> 
                    </a>
                    <div class="info">
                        <h3>Sweet Depot</h3>
                        <p>Your one-stop shop for a wide selection of international and local confectionery.</p>
                        <button class="open-popup" data-popup-target="sweetdeportPopup">Learn More</button>
                    </div>
                </div>
                <div class="block">
                    <a href="Sweet Mart.html">
                        <img src="images-logo/sweet-mart-logo.jpg" alt="Sweet-Mart-Logo">
                    </a>
                    <div class="info">
                        <h3>Sweet Mart</h3>
                        <p>A classic favorite with an extensive range of sweets, snacks, and festive delights.</p>
                        <button class="open-popup" data-popup-target="sweetmartPopup">Learn More</button>
                    </div>
                </div>
                <div class="block">
                    <a href="Polar ice cream.html">
                        <img src="images-logo/polar-ice-cream-logo.png" alt="Polar-Ice-Cream-Logo">
                    </a>
                    <div class="info">
                        <h3>Polar Ice Cream</h3>
                        <p>Cool down with our delicious range of homemade ice creams and frozen desserts.</p>
                        <button class="open-popup" data-popup-target="polaricecreampopup">Learn More</button>
                    </div>
                </div>
                <div class="block">
                    <a href="#">
                        <img src="images/sunrise-sweets/sunrise logo.jpg" alt="Sunrise-Sweets-Logo">
                    </a>
                    <div class="info">
                        <h3>Sunrise Sweets</h3>
                        <p>Start your day with our delightful range of morning sweets and traditional breakfast desserts.</p>
                        <button class="open-popup" data-popup-target="sunrisesweetsPopup">Learn More</button>
                    </div>
                </div>
                <div class="block">
                    <a href="#">
                        <img src="images/Z and S sweets/z and s logo.jpg" alt="Z-and-S-Sweets Logo">
                    </a>
                    <div class="info">
                        <h3>Z and S Sweets</h3>
                        <p>Specialty sweets and desserts crafted with generations of expertise and traditional methods.</p>
                        <button class="open-popup" data-popup-target="zandsweetsPopup">Learn More</button>
                    </div>
                </div>
                <div class="block">
                    <a href="#">
                        <img src="https://placehold.co/320x240/8e44ad/ffffff?text=Desert+Sweets" alt="Desert Sweets Logo">
                    </a>
                    <div class="info">
                        <h3>Desert Sweets</h3>
                        <p>Unique sweets inspired by Middle Eastern flavors and traditional desert recipes.</p>
                        <button class="open-popup" data-popup-target="desertsweetsPopup">Learn More</button>
                    </div>
                </div>
                <div class="block">
                    <a href="#">
                        <img src="https://placehold.co/320x240/34495e/ffffff?text=Royal+Sweets" alt="Royal Sweets Logo">
                    </a>
                    <div class="info">
                        <h3>Royal Sweets</h3>
                        <p>Luxury sweets and desserts fit for royalty, with premium ingredients and exquisite presentation.</p>
                        <button class="open-popup" data-popup-target="royalsweetsPopup">Learn More</button>
                    </div>
                </div>
                <div class="block">
                    <a href="#">
                        <img src="https://placehold.co/320x240/7f8c8d/ffffff?text=Golden+Sweets" alt="Golden Sweets Logo">
                    </a>
                    <div class="info">
                        <h3>Golden Sweets</h3>
                        <p>Our premium line of sweets featuring edible gold and the finest ingredients for special occasions.</p>
                        <button class="open-popup" data-popup-target="goldensweetsPopup">Learn More</button>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <img src="images/logo/hive-times-logo.png" alt="Hive Times Logo">
                <h3>Hive Times</h3>
                <p>Your trusted partner for Trade Directory</p>
                <ul class="social-media">
                    <li><a href="#" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a></li>
                    <li><a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a></li>
                    <li><a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a></li>
                    <li><a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a></li>
                    <li><a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a></li>
                </ul>
            </div>
            <div class="footer-nav">
                <ul>
                    <li><a href="about page home.html"><i class="fas fa-info-circle"></i> About</a></li>
                    <li><a href="index.html"><i class="fas fa-shopping-bag"></i> Businesses</a></li>
                    <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
                    <li><a href="#"><i class="fas fa-file-contract"></i> Terms</a></li>
                    <li><a href=""><i class="fas fa-shield-alt"></i> Policy</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Hive Times. All rights reserved. Made with <i class="fas fa-heart"></i> for Businesses</p>
        </div>
    </footer>
    <button class="back-to-top" onclick="scrollToTop()" aria-label="Back to top">
        <i class="fas fa-arrow-up"></i>
    </button>
    <button class="contact-button" onclick="showContactPopup()" aria-label="Contact us">
        <i class="fas fa-comment-dots"></i>
    </button>
    
    <!-- Generic Popup -->
    <div id="myPopup" class="popup" role="dialog" aria-modal="true" aria-labelledby="popup-title">
        <div class="popup-content">
            <span class="close-button" role="button" aria-label="Close popup" onclick="closeGenericPopup()">&times;</span>
            <h3 id="popup-title"></h3>
            <p id="popup-text"></p>
        </div>
    </div>

    <!-- Login Popup -->
    <div id="loginPopup" class="popup" role="dialog" aria-modal="true" aria-labelledby="loginPopupTitle">
        <div class="popup-content">
            <span class="close-button" role="button" aria-label="Close login popup" onclick="hideLoginPopup()">&times;</span>
            <h3 id="loginPopupTitle">Login to Your Account</h3>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email:</label>
                    <input type="email" id="loginEmail" name="email" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password:</label>
                    <input type="password" id="loginPassword" name="password" required>
                </div>
                <button type="submit" class="form-submit-btn">Login</button>
                <p class="toggle-form">Don't have an account? <a href="#" id="showRegister">Create one</a></p>
            </form>
        </div>
    </div>

    <!-- Register Popup -->
    <div id="registerPopup" class="popup" role="dialog" aria-modal="true" aria-labelledby="registerPopupTitle">
        <div class="popup-content">
            <span class="close-button" role="button" aria-label="Close register popup" onclick="hideRegisterPopup()">&times;</span>
            <h3 id="registerPopupTitle">Create Your Account</h3>
            <form id="registerForm">
                <div class="form-group">
                    <label for="registerName">Full Name:</label>
                    <input type="text" id="registerName" name="name" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email:</label>
                    <input type="email" id="registerEmail" name="email" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Password:</label>
                    <input type="password" id="registerPassword" name="password" required minlength="6">
                </div>
                <div class="form-group">
                    <label for="registerConfirmPassword">Confirm Password:</label>
                    <input type="password" id="registerConfirmPassword" name="confirmPassword" required>
                </div>
                <button type="submit" class="form-submit-btn">Create Account</button>
                <p class="toggle-form">Already have an account? <a href="#" id="showLogin">Login</a></p>
            </form>
        </div>
    </div>

    <!-- Contact Popup -->
    <div id="contactPopup" class="contact-popup" role="dialog" aria-modal="true" aria-labelledby="contactPopupTitle">
        <h3 id="contactPopupTitle">Get In Touch</h3>
        <p>How would you like to contact us?</p>
        <button onclick="window.open('https://wa.me/+27649220145', '_blank')" aria-label="Contact via WhatsApp"><i class="fab fa-whatsapp"></i> WhatsApp</button>
        <button onclick="window.location.href='mailto:contact@tradetimes.com'" aria-label="Contact via Email"><i class="fas fa-envelope"></i> Email</button>
        <button onclick="hideContactPopup()" class="close-btn" aria-label="Close contact options"><i class="fas fa-times"></i> Close</button>
    </div>

    <!-- Cart Modal -->
    <div id="cartModal" class="popup" role="dialog" aria-modal="true" aria-labelledby="cartModalTitle">
        <div id="cartModalContent">
            <span class="close-button" role="button" aria-label="Close cart" onclick="hideCartModal()">&times;</span>
            <h3 id="cartModalTitle">Your Shopping Cart</h3>
            <div id="cart-header">
                <img id="cartBusinessLogo" src="" alt="Business Logo">
                <h3 id="cartBusinessName"></h3>
            </div>
            <div id="cartItems">
                <p id="emptyCartMessage">Your cart is empty.</p>
            </div>
            <div class="cart-total" id="cartTotal">Total: R0.00</div>
            <button class="checkout-btn" onclick="checkout()">Proceed to Checkout</button>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" onclick="hideContactPopup()" role="presentation"></div>

    <script>
        // --- User Authentication System ---
        let currentUser = null;
        function checkUserLogin() {
            const savedUser = localStorage.getItem('hiveTimesUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateUserUI();
            }
        }
        function updateUserUI() {
            if (currentUser) {
                document.getElementById('userDisplay').textContent = 'My Account';
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('userEmail').textContent = currentUser.email;
                document.getElementById('userBtn').removeEventListener('click', showLoginPopup);
                document.getElementById('userBtn').addEventListener('click', toggleUserProfile);
            } else {
                document.getElementById('userDisplay').textContent = 'Account';
                document.getElementById('userBtn').addEventListener('click', showLoginPopup);
            }
        }
        function toggleUserProfile() {
            const userProfile = document.getElementById('userProfile');
            userProfile.classList.toggle('active');
        }
        function logout() {
            currentUser = null;
            localStorage.removeItem('hiveTimesUser');
            updateUserUI();
            alert('You have been logged out successfully!');
        }

        // --- Login Popup ---
        const loginPopup = document.getElementById('loginPopup');
        const loginForm = document.getElementById('loginForm');
        function showLoginPopup() {
            loginPopup.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            loginPopup.setAttribute('aria-hidden', 'false');
            loginForm.querySelector('input').focus();
        }
        function hideLoginPopup() {
            loginPopup.style.display = 'none';
            document.body.style.overflow = '';
            loginPopup.setAttribute('aria-hidden', 'true');
        }
        loginForm.addEventListener('submit', function(event) {
            event.preventDefault();
            const email = this.loginEmail.value;
            const password = this.loginPassword.value;
            const users = JSON.parse(localStorage.getItem('hiveTimesUsers') || '[]');
            const user = users.find(u => u.email === email && u.password === password);
            if (user) {
                currentUser = { name: user.name, email: user.email };
                localStorage.setItem('hiveTimesUser', JSON.stringify(currentUser));
                updateUserUI();
                hideLoginPopup();
                alert(`Login successful! Welcome back, ${currentUser.name}`);
            } else {
                alert('Invalid email or password. Please try again.');
            }
        });

        // --- Register Popup ---
        const registerPopup = document.getElementById('registerPopup');
        function showRegisterPopup() {
            registerPopup.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            registerPopup.setAttribute('aria-hidden', 'false');
            registerPopup.querySelector('input').focus();
        }
        function hideRegisterPopup() {
            registerPopup.style.display = 'none';
            document.body.style.overflow = '';
            registerPopup.setAttribute('aria-hidden', 'true');
        }
        document.getElementById('showRegister').addEventListener('click', function(e) {
            e.preventDefault();
            hideLoginPopup();
            showRegisterPopup();
        });
        document.getElementById('showLogin').addEventListener('click', function(e) {
            e.preventDefault();
            hideRegisterPopup();
            showLoginPopup();
        });
        registerForm.addEventListener('submit', function(event) {
            event.preventDefault();
            const name = this.registerName.value;
            const email = this.registerEmail.value;
            const password = this.registerPassword.value;
            const confirmPassword = this.registerConfirmPassword.value;
            if (password !== confirmPassword) {
                alert('Passwords do not match. Please try again.');
                return;
            }
            const users = JSON.parse(localStorage.getItem('hiveTimesUsers') || '[]');
            if (users.some(u => u.email === email)) {
                alert('An account with this email already exists. Please login or use a different email.');
                return;
            }
            const newUser = { name, email, password };
            users.push(newUser);
            localStorage.setItem('hiveTimesUsers', JSON.stringify(users));
            alert('Account created successfully! You can now login with your credentials.');
            hideRegisterPopup();
            showLoginPopup();
            this.reset();
        });

        // --- Generic Popup ---
        const genericPopup = document.getElementById('myPopup');
        const popupTitle = document.getElementById('popup-title');
        const popupText = document.getElementById('popup-text');
        const closeButton = genericPopup.querySelector('.close-button');
        const popupContents = {
            broadwaysweetsPopup: { title: "About Broadway Sweets", text: "Broadway Sweets is a premier destination for traditional Indian sweets and desserts. Established with a passion for authentic flavors, we craft our products using time-honored recipes passed down through generations. Our commitment to quality ingredients and traditional methods ensures that every bite delivers the rich, authentic taste of Indian confectionery. From festive specialties to everyday treats, Broadway Sweets brings the sweetness of tradition to your table." },
            sweetdeportPopup: { title: "About Sweet Depot", text: "Sweet Depot is your comprehensive source for a wide variety of sweets, snacks, and confectionery items from around the world. Our mission is to bring joy to every occasion with our diverse selection of quality products. Whether you're looking for traditional favorites or international treats, Sweet Depot offers something for every palate. With a focus on customer satisfaction and competitive pricing, we've become a trusted name in the confectionery industry." },
            sweetmartPopup: { title: "About Sweet Mart", text: "Sweet Mart has been serving sweet lovers for over two decades with our extensive range of quality sweets, snacks, and festive delights. Our stores are designed to be a paradise for those with a sweet tooth, offering everything from traditional Indian mithai to international chocolates and candies. We pride ourselves on our customer service, product quality, and unbeatable value. Sweet Mart is more than just a store  it's a destination for creating sweet memories." },
            polaricecreampopup: { title: "About Polar Ice Cream", text: "Polar Ice Cream brings the chill to your summer days with our delicious range of premium ice creams and frozen desserts. Using only the finest ingredients and innovative recipes, we create ice creams that delight the senses. From classic vanilla and chocolate to exotic flavors inspired by global cuisines, Polar Ice Cream offers something for everyone. Our commitment to quality and innovation has made us a favorite among ice cream lovers of all ages." },
            sunrisesweetsPopup: { title: "About Sunrise Sweets", text: "Sunrise Sweets specializes in morning treats and breakfast desserts that start your day on a sweet note. Our products are crafted to complement your morning tea or coffee, offering a perfect balance of sweetness and flavor. From light pastries to traditional breakfast sweets, Sunrise Sweets uses quality ingredients to create products that are both delicious and satisfying. We believe that every day should begin with a touch of sweetness." },
            zandsweetsPopup: { title: "About Z and S Sweets", text: "Z and S Sweets represents generations of expertise in traditional sweet-making. Our products are crafted using time-honored methods and recipes that have been perfected over decades. Specializing in authentic regional specialties, we bring the rich heritage of Indian confectionery to discerning customers. Each sweet is made with care and attention to detail, ensuring consistent quality and authentic flavor. Z and S Sweets is a name synonymous with tradition and quality." },
            desertsweetsPopup: { title: "About Desert Sweets", text: "Desert Sweets draws inspiration from the rich culinary traditions of the Middle East, creating unique sweets that blend ancient flavors with modern techniques. Our products feature ingredients like dates, pistachios, rose water, and saffron, creating distinctive flavors that transport you to the heart of the desert. Whether you're enjoying our baklava, halva, or other specialties, Desert Sweets offers a taste of Middle Eastern hospitality and tradition." },
            royalsweetsPopup: { title: "About Royal Sweets", text: "Royal Sweets offers a premium line of luxury confectionery fit for royalty. Our products feature the finest ingredients, exquisite presentation, and innovative flavor combinations. From gold-leaf chocolates to truffles infused with rare spices, Royal Sweets creates memorable experiences through exceptional quality and craftsmanship. Perfect for special occasions and gift-giving, we're known for our attention to detail and dedication to excellence." },
            goldensweetsPopup: { title: "About Golden Sweets", text: "Golden Sweets represents the pinnacle of luxury confectionery, featuring edible gold and the finest ingredients for special occasions. Our master confectioners combine traditional techniques with innovative designs to create sweets that are as beautiful as they are delicious. From gold-dusted chocolates to intricately designed mithai, Golden Sweets transforms ordinary treats into extraordinary experiences. Perfect for weddings, anniversaries, and other milestone celebrations." }
        };
        function openGenericPopup(contentKey) {
            const content = popupContents[contentKey];
            if (content) {
                popupTitle.textContent = content.title;
                popupText.textContent = content.text;
                genericPopup.style.display = 'flex';
                document.body.style.overflow = 'hidden';
                genericPopup.setAttribute('aria-hidden', 'false');
                closeButton.focus();
            }
        }
        function closeGenericPopup() {
            genericPopup.style.display = 'none';
            popupTitle.textContent = '';
            popupText.textContent = '';
            document.body.style.overflow = '';
            genericPopup.setAttribute('aria-hidden', 'true');
        }
        document.querySelectorAll('.open-popup').forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                const targetKey = button.dataset.popupTarget;
                openGenericPopup(targetKey);
            });
        });
        closeButton.addEventListener('click', closeGenericPopup);
        genericPopup.addEventListener('click', (event) => {
            if (event.target === genericPopup) closeGenericPopup();
        });

        // --- Contact Popup ---
        const contactPopup = document.getElementById('contactPopup');
        const overlay = document.querySelector('.overlay');
        function showContactPopup() {
            contactPopup.style.display = 'block';
            overlay.style.display = 'block';
            document.body.style.overflow = 'hidden';
            contactPopup.setAttribute('aria-hidden', 'false');
            contactPopup.querySelector('button').focus();
        }
        function hideContactPopup() {
            contactPopup.style.display = 'none';
            overlay.style.display = 'none';
            document.body.style.overflow = '';
            contactPopup.setAttribute('aria-hidden', 'true');
        }
        overlay.addEventListener('click', hideContactPopup);

        // --- Dropdown Menu Accessibility ---
        const dropdownBtn = document.getElementById('businessesDropdownBtn');
        const dropdownContent = document.getElementById('businessesDropdownContent');
        dropdownBtn.addEventListener('click', () => {
            const isExpanded = dropdownBtn.getAttribute('aria-expanded') === 'true';
            dropdownBtn.setAttribute('aria-expanded', !isExpanded);
            dropdownContent.setAttribute('aria-expanded', !isExpanded);
        });
        document.addEventListener('click', (event) => {
            const dropdownLi = dropdownBtn.closest('.dropdown');
            if (!dropdownLi.contains(event.target) && dropdownBtn.getAttribute('aria-expanded') === 'true') {
                dropdownBtn.setAttribute('aria-expanded', 'false');
                dropdownContent.setAttribute('aria-expanded', 'false');
            }
            const userProfile = document.getElementById('userProfile');
            if (!document.querySelector('.user-menu').contains(event.target) && userProfile.classList.contains('active')) {
                userProfile.classList.remove('active');
            }
        });

        // --- Slider Functionality ---
        let currentSlide = 0;
        const slider = document.getElementById('slider');
        const slides = document.querySelectorAll('.slide');
        const indicators = document.querySelectorAll('.indicator');
        const sliderContainer = document.getElementById('sliderContainer');
        const SLIDE_DURATION = 4000;

        function showSlide(index) {
            currentSlide = (index + slides.length) % slides.length;
            slider.style.transform = `translateX(-${currentSlide * 100}%)`;
            indicators.forEach((ind, i) => {
                ind.classList.toggle('active', i === currentSlide);
                ind.setAttribute('aria-selected', i === currentSlide);
            });
        }
        function nextSlide() {
            showSlide(currentSlide + 1);
        }
        function changeSlide(index) {
            clearInterval(slideInterval);
            showSlide(index);
            startSlider();
        }
        function startSlider() {
            slideInterval = setInterval(nextSlide, SLIDE_DURATION);
        }
        if (sliderContainer) {
            sliderContainer.addEventListener('mouseenter', () => clearInterval(slideInterval));
            sliderContainer.addEventListener('mouseleave', startSlider);
        }
        showSlide(0);
        startSlider();

        // --- Search Functionality ---
        const searchInput = document.getElementById('searchInput');
        const businessBlocks = document.querySelectorAll('.block');
        searchInput.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            businessBlocks.forEach(block => {
                const businessName = block.querySelector('h3').textContent.toLowerCase();
                const businessDescription = block.querySelector('p').textContent.toLowerCase();
                const isVisible = businessName.includes(searchTerm) || businessDescription.includes(searchTerm);
                block.style.display = isVisible ? 'block' : 'none';
                block.style.opacity = isVisible ? '1' : '0.5';
            });
        });

        // --- Back to Top Button ---
        const backToTopButton = document.querySelector('.back-to-top');
        window.addEventListener('scroll', () => {
            backToTopButton.style.display = window.scrollY > 400 ? 'flex' : 'none';
        });
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // --- Shopping Cart System ---
        let cart = [];
        function initCart() {
            try {
                const savedCart = localStorage.getItem('hiveTimesCart');
                cart = savedCart ? JSON.parse(savedCart) : [];
            } catch (error) {
                console.error("Error loading cart:", error);
                cart = [];
            }
        }
        function updateCartCount() {
            const count = cart.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cartCount').textContent = count;
        }
        function saveCart() {
            try {
                localStorage.setItem('hiveTimesCart', JSON.stringify(cart));
                updateCartCount();
            } catch (error) {
                console.error("Error saving cart:", error);
            }
        }
        function showCartModal() {
            const cartModal = document.getElementById('cartModal');
            const cartItemsDiv = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            const emptyCartMessage = document.getElementById('emptyCartMessage');
            const cartBusinessLogo = document.getElementById('cartBusinessLogo');
            const cartBusinessName = document.getElementById('cartBusinessName');
            
            cartItemsDiv.innerHTML = '';
            cartBusinessLogo.style.display = 'none';
            cartBusinessName.textContent = '';
            
            if (cart.length === 0) {
                emptyCartMessage.style.display = 'block';
                cartTotal.textContent = 'Total: R0.00';
                return;
            }

            const firstItem = cart[0];
            cartBusinessLogo.src = firstItem.businessLogo;
            cartBusinessLogo.style.display = 'block';
            cartBusinessName.textContent = firstItem.businessName;
            
            let total = 0;
            cart.forEach((item, index) => {
                total += item.price * item.quantity;
                const itemTotal = item.price * item.quantity;
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <img src="${item.image}" alt="${item.name}">
                    <div class="cart-item-details">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">R${itemTotal.toFixed(2)}</div>
                        <div class="cart-item-quantity">
                            <button class="quantity-btn decrease-qty" data-index="${index}">-</button>
                            <span class="quantity-display">${item.quantity}</span>
                            <button class="quantity-btn increase-qty" data-index="${index}">+</button>
                            <button class="remove-item-btn" data-index="${index}">Remove</button>
                        </div>
                    </div>
                `;
                cartItemsDiv.appendChild(cartItem);
            });
            total = total.toFixed(2);
            cartTotal.textContent = `Total: R${total}`;
            cartModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            cartModal.setAttribute('aria-hidden', 'false');
            
            // Quantity button handlers
            document.querySelectorAll('.increase-qty').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const index = parseInt(btn.dataset.index);
                    cart[index].quantity++;
                    saveCart();
                    showCartModal();
                });
            });
            document.querySelectorAll('.decrease-qty').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const index = parseInt(btn.dataset.index);
                    if (cart[index].quantity > 1) {
                        cart[index].quantity--;
                        saveCart();
                        showCartModal();
                    }
                });
            });
            document.querySelectorAll('.remove-item-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const index = parseInt(btn.dataset.index);
                    cart.splice(index, 1);
                    saveCart();
                    showCartModal();
                });
            });
        }
        function hideCartModal() {
            const cartModal = document.getElementById('cartModal');
            if (cartModal) {
                cartModal.style.display = 'none';
                document.body.style.overflow = '';
                cartModal.setAttribute('aria-hidden', 'true');
            }
        }
        function checkout() {
            if (cart.length === 0) {
                alert('Your cart is empty!');
                return;
            }
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            alert(`Proceeding to checkout with ${cart.length} items totaling R${total.toFixed(2)}. Thank you for shopping with us! Your order will be processed shortly.`);
            cart = [];
            saveCart();
            hideCartModal();
        }

        // Initialize on load
        window.addEventListener('DOMContentLoaded', () => {
            checkUserLogin();
            updateUserUI();
            initCart();
            document.getElementById('cartBtn').addEventListener('click', showCartModal);
        });

        // Accessibility - Close on ESC
        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape') {
                if (genericPopup.style.display === 'flex') closeGenericPopup();
                if (contactPopup.style.display === 'block') hideContactPopup();
                if (loginPopup.style.display === 'flex') hideLoginPopup();
                if (registerPopup.style.display === 'flex') hideRegisterPopup();
                if (dropdownBtn.getAttribute('aria-expanded') === 'true') dropdownBtn.click();
                if (document.getElementById('userProfile').classList.contains('active')) toggleUserProfile();
                if (document.getElementById('cartModal').style.display === 'flex') hideCartModal();
            }
        });
    </script>
    <script src="cart.js"></script>
</body>
</html>